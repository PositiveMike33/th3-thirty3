[{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\src\\App.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\src\\Avatar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\src\\ChatInterface.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":304,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":304,"endColumn":23},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":317,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":317,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"err"},"fix":{"range":[12624,12627],"text":"()"},"desc":"Remove unused variable 'err'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport Avatar from './Avatar';\r\nimport GoogleAuthPanel from './components/GoogleAuthPanel';\r\nimport FeedbackModal from './components/FeedbackModal';\r\nimport PatternModal from './components/PatternModal';\r\nimport ModelSelector from './components/ModelSelector';\r\nimport Dashboard from './Dashboard'; // Import Dashboard\r\nimport SpaceDashboard from './SpaceDashboard'; // Import SpaceDashboard\r\nimport ProjectDashboard from './ProjectDashboard'; // Import ProjectDashboard\r\nimport SettingsPage from './SettingsPage'; // Import SettingsPage\r\nimport { APP_CONFIG } from './config';\r\nimport { MessageSquare, LayoutDashboard, Settings, LogOut, Telescope, Briefcase, Edit2, Check, X } from 'lucide-react';\r\n\r\nconst ChatInterface = () => {\r\n    const [messages, setMessages] = useState([\r\n        { id: 1, sender: 'agent', text: `Initialisation... ${APP_CONFIG.name} en ligne. C'est quoi le plan ?` }\r\n    ]);\r\n    const [input, setInput] = useState('');\r\n    const [isListening, setIsListening] = useState(false);\r\n    const [isMuted, setIsMuted] = useState(false);\r\n    const messagesEndRef = useRef(null);\r\n    const [patterns, setPatterns] = useState([]);\r\n    const [selectedPattern, setSelectedPattern] = useState('');\r\n\r\n    // View State (Chat vs Dashboard)\r\n    const [currentView, setCurrentView] = useState('chat');\r\n\r\n    // Model Selection State\r\n    const [selectedProvider, setSelectedProvider] = useState('local');\r\n    const [selectedModel, setSelectedModel] = useState('granite3.1-moe:1b');\r\n\r\n    // Feedback State\r\n    const [feedbackModalOpen, setFeedbackModalOpen] = useState(false);\r\n    const [feedbackMsgId, setFeedbackMsgId] = useState(null);\r\n    const [correctionText, setCorrectionText] = useState('');\r\n\r\n    // Session State\r\n    const [sessions, setSessions] = useState([]);\r\n    const [currentSessionId, setCurrentSessionId] = useState(null);\r\n    const [editingSessionId, setEditingSessionId] = useState(null);\r\n    const [editTitle, setEditTitle] = useState('');\r\n\r\n    // Pattern View State\r\n    const [patternModalOpen, setPatternModalOpen] = useState(false);\r\n    const [viewingPatternContent, setViewingPatternContent] = useState('');\r\n    const [isAgentSpeaking, setIsAgentSpeaking] = useState(false);\r\n\r\n    const isMutedRef = useRef(isMuted);\r\n\r\n    useEffect(() => {\r\n        isMutedRef.current = isMuted;\r\n        if (isMuted) {\r\n            window.speechSynthesis.cancel(); // Stop talking immediately if muted\r\n        }\r\n    }, [isMuted]);\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    };\r\n\r\n    useEffect(scrollToBottom, [messages]);\r\n\r\n    // Helper: Text-to-Speech\r\n    const speak = (text) => {\r\n        if (!isMutedRef.current) {\r\n            const utterance = new SpeechSynthesisUtterance(text);\r\n            const loadVoices = () => {\r\n                window.speechSynthesis.onvoiceschanged = null;\r\n                const voices = window.speechSynthesis.getVoices();\r\n                const frenchVoice = voices.find(voice => voice.lang.includes('fr-CA')) || voices.find(voice => voice.lang.includes('fr'));\r\n                if (frenchVoice) utterance.voice = frenchVoice;\r\n                utterance.pitch = 0.9;\r\n                utterance.rate = 1.1;\r\n\r\n                if (!isMutedRef.current) {\r\n                    window.speechSynthesis.speak(utterance);\r\n                }\r\n            };\r\n\r\n            if (window.speechSynthesis.getVoices().length === 0) {\r\n                window.speechSynthesis.onvoiceschanged = loadVoices;\r\n            } else {\r\n                loadVoices();\r\n            }\r\n        }\r\n    };\r\n\r\n    const loadSessions = () => {\r\n        fetch('http://localhost:3000/sessions')\r\n            .then(res => res.json()\r\n                .then(data => {\r\n                    setSessions(data);\r\n                }))\r\n            .catch(err => console.error(\"Failed to load sessions\", err));\r\n    };\r\n\r\n    useEffect(() => {\r\n        // Load Patterns\r\n        fetch('http://localhost:3000/patterns')\r\n            .then(res => res.json())\r\n            .then(data => setPatterns(data))\r\n            .catch(err => console.error(\"Failed to load patterns\", err));\r\n\r\n        // Load Settings (Compute Mode)\r\n        fetch('http://localhost:3000/settings')\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (data.computeMode) {\r\n                    setSelectedProvider(data.computeMode);\r\n                    // Set default model based on mode\r\n                    if (data.computeMode === 'cloud') {\r\n                        // Default to Gemini 1.5 Pro (Site Default)\r\n                        setSelectedModel('gemini-1.5-pro');\r\n                    }\r\n                }\r\n            })\r\n            .catch(err => console.error(\"Failed to load settings\", err));\r\n\r\n        // Load Sessions\r\n        loadSessions();\r\n    }, []);\r\n\r\n    const createNewSession = () => {\r\n        setMessages([{ id: 1, sender: 'agent', text: `Initialisation... ${APP_CONFIG.name} en ligne. C'est quoi le plan ?` }]);\r\n        setCurrentSessionId(null);\r\n    };\r\n\r\n    const loadSession = (id) => {\r\n        fetch(`http://localhost:3000/sessions/${id}`)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                // Map backend format (role/content) to frontend format (sender/text)\r\n                // and ensure IDs exist\r\n                const formattedMessages = data.messages.map((msg, index) => ({\r\n                    id: msg.id || `legacy-${index}-${Date.now()}`,\r\n                    sender: msg.role === 'user' ? 'user' : 'agent',\r\n                    text: msg.content\r\n                }));\r\n                setMessages(formattedMessages);\r\n                setCurrentSessionId(data.id);\r\n            })\r\n            .catch(err => console.error(\"Failed to load session\", err));\r\n    };\r\n\r\n    const deleteSession = (id, e) => {\r\n        e.stopPropagation();\r\n        if (window.confirm(\"Supprimer cette session ?\")) {\r\n            fetch(`http://localhost:3000/sessions/${id}`, { method: 'DELETE' })\r\n                .then(() => loadSessions());\r\n        }\r\n    };\r\n\r\n    const startEditing = (session, e) => {\r\n        e.stopPropagation();\r\n        setEditingSessionId(session.id);\r\n        setEditTitle(session.title);\r\n    };\r\n\r\n    const cancelEditing = (e) => {\r\n        if (e) e.stopPropagation();\r\n        setEditingSessionId(null);\r\n        setEditTitle('');\r\n    };\r\n\r\n    const saveRename = async (id, e) => {\r\n        if (e) e.stopPropagation();\r\n        if (!editTitle.trim()) return;\r\n\r\n        try {\r\n            const response = await fetch(`http://localhost:3000/sessions/${id}/title`, {\r\n                method: 'PATCH',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ title: editTitle })\r\n            });\r\n            if (response.ok) {\r\n                setEditingSessionId(null);\r\n                loadSessions();\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to rename session\", error);\r\n        }\r\n    };\r\n\r\n    const handleDeleteMessage = async (msgId, e) => {\r\n        e.stopPropagation();\r\n        if (!currentSessionId) return; // Can't delete from unsaved session easily without ID\r\n\r\n        if (window.confirm(\"Supprimer ce message ?\")) {\r\n            try {\r\n                const response = await fetch(`http://localhost:3000/sessions/${currentSessionId}/messages/${msgId}`, {\r\n                    method: 'DELETE'\r\n                });\r\n                if (response.ok) {\r\n                    setMessages(prev => prev.filter(m => m.id !== msgId));\r\n                } else {\r\n                    console.error(\"Failed to delete message\");\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error deleting message:\", error);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleSend = async () => {\r\n        if (!input.trim()) return;\r\n\r\n        const userMessage = { id: messages.length + 1, sender: 'user', text: input };\r\n        setMessages(prev => [...prev, userMessage]);\r\n        setInput('');\r\n\r\n        try {\r\n            setIsAgentSpeaking(true);\r\n            const response = await fetch('http://localhost:3000/chat', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    message: input,\r\n                    pattern: selectedPattern,\r\n                    provider: selectedProvider,\r\n                    model: selectedModel,\r\n                    sessionId: currentSessionId\r\n                }),\r\n            });\r\n            const data = await response.json();\r\n\r\n            if (data.sessionId) {\r\n                setCurrentSessionId(data.sessionId);\r\n                loadSessions(); // Refresh list\r\n            }\r\n\r\n            // Update user message with real ID if needed (though we just appended it)\r\n            // Ideally we should replace the optimistic message with the confirmed one\r\n            // For simplicity, we'll just update the last user message ID if we could track it,\r\n            // but here we just append the agent message.\r\n            // A better way is to reload the session or update the state more carefully.\r\n            // Let's just append the agent message with its ID.\r\n\r\n            const agentMessage = { id: data.agentMsgId, sender: 'agent', text: data.reply };\r\n\r\n            // Also update the user message ID we just sent? \r\n            // We added it with `messages.length + 1`. \r\n            // Let's assume for now we reload or just accept the temp ID until reload.\r\n            // actually, let's update the last user message with the real ID\r\n            setMessages(prev => {\r\n                const newMsgs = [...prev];\r\n                const lastUserMsgIndex = newMsgs.findIndex(m => m.text === input && m.sender === 'user'); // Simple heuristic\r\n                if (lastUserMsgIndex !== -1) {\r\n                    newMsgs[lastUserMsgIndex].id = data.userMsgId;\r\n                }\r\n                return [...newMsgs, agentMessage];\r\n            });\r\n            setIsAgentSpeaking(false);\r\n            speak(data.reply);\r\n        } catch (error) {\r\n            console.error(\"Error:\", error);\r\n            const errorMessage = { id: messages.length + 2, sender: 'agent', text: \"Erreur de connexion au serveur.\" };\r\n            setMessages(prev => [...prev, errorMessage]);\r\n        }\r\n    };\r\n\r\n    const handleKeyDown = (e) => {\r\n        if (e.key === 'Enter') handleSend();\r\n    };\r\n\r\n    const toggleListening = () => {\r\n        if (isListening) {\r\n            setIsListening(false);\r\n        } else {\r\n            setIsListening(true);\r\n            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();\r\n            recognition.lang = 'fr-FR';\r\n            recognition.start();\r\n            recognition.onresult = (event) => {\r\n                const transcript = event.results[0][0].transcript;\r\n                setInput(transcript);\r\n                setIsListening(false);\r\n            };\r\n        }\r\n    };\r\n\r\n    const handleFeedbackOpen = (msgId) => {\r\n        setFeedbackMsgId(msgId);\r\n        setFeedbackModalOpen(true);\r\n    };\r\n\r\n    const submitFeedback = async () => {\r\n        if (!feedbackMsgId || !correctionText) return;\r\n\r\n        // Find original query (user message before the agent message)\r\n        const msgIndex = messages.findIndex(m => m.id === feedbackMsgId);\r\n        const wrongResponse = messages[msgIndex].text;\r\n        const originalQuery = messages[msgIndex - 1]?.text;\r\n\r\n        if (originalQuery) {\r\n            try {\r\n                await fetch('http://localhost:3000/feedback', {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ originalQuery, wrongResponse, correction: correctionText })\r\n                });\r\n                alert(\"Correction envoy√©e !\");\r\n                setFeedbackModalOpen(false);\r\n                setCorrectionText('');\r\n            } catch (e) {\r\n                alert(\"Erreur lors de l'envoi du feedback.\");\r\n            }\r\n        }\r\n    };\r\n\r\n    const openPatternModal = (patternName) => {\r\n        fetch(`http://localhost:3000/patterns/${patternName}`)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                setViewingPatternContent(data.content);\r\n                setPatternModalOpen(true);\r\n            })\r\n            .catch(err => alert(\"Impossible de charger le pattern\"));\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex h-screen w-full bg-gray-900 text-cyan-300 font-mono overflow-hidden\">\r\n            {/* SIDEBAR */}\r\n            <div className=\"w-64 bg-black border-r border-cyan-900 flex flex-col\">\r\n                <div className=\"p-6 border-b border-cyan-900 flex justify-center items-center\">\r\n                    <div className=\"transform scale-150\">\r\n                        <Avatar isSpeaking={isAgentSpeaking} />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Navigation */}\r\n                <div className=\"p-2 space-y-1\">\r\n                    <button\r\n                        onClick={() => setCurrentView('chat')}\r\n                        className={`w-full flex items-center gap-3 p-3 rounded transition-all ${currentView === 'chat' ? 'bg-cyan-900/50 text-white' : 'hover:bg-cyan-900/20 text-gray-400'}`}\r\n                    >\r\n                        <MessageSquare size={18} />\r\n                        <span>Op√©rations</span>\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setCurrentView('dashboard')}\r\n                        className={`w-full flex items-center gap-3 p-3 rounded transition-all ${currentView === 'dashboard' ? 'bg-cyan-900/50 text-white' : 'hover:bg-cyan-900/20 text-gray-400'}`}\r\n                    >\r\n                        <LayoutDashboard size={18} />\r\n                        <span>Finance QG</span>\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={() => setCurrentView('space')}\r\n                        className={`w-full flex items-center gap-3 p-3 rounded transition-all ${currentView === 'space' ? 'bg-cyan-900/50 text-white' : 'hover:bg-cyan-900/20 text-gray-400'}`}\r\n                    >\r\n                        <Telescope size={18} />\r\n                        <span>Space Monitor</span>\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={() => setCurrentView('project')}\r\n                        className={`w-full flex items-center gap-3 p-3 rounded transition-all ${currentView === 'project' ? 'bg-cyan-900/50 text-white' : 'hover:bg-cyan-900/20 text-gray-400'}`}\r\n                    >\r\n                        <Briefcase size={18} />\r\n                        <span>Gestion Projet</span>\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Sessions List */}\r\n                <div className=\"flex-1 overflow-y-auto p-4\">\r\n                    <div className=\"flex justify-between items-center mb-4\">\r\n                        <h2 className=\"text-xs uppercase tracking-widest text-gray-500\">Missions</h2>\r\n                        <button onClick={createNewSession} className=\"text-xs text-cyan-400 hover:text-cyan-300 border border-cyan-900 px-2 py-1 rounded hover:bg-cyan-900/30 transition-all\">\r\n                            + NEW\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        {sessions.map(session => (\r\n                            <div\r\n                                key={session.id}\r\n                                onClick={() => loadSession(session.id)}\r\n                                className={`group p-3 rounded cursor-pointer border transition-all ${currentSessionId === session.id ? 'bg-cyan-900/30 border-cyan-500 text-white' : 'bg-gray-900 border-gray-800 text-gray-400 hover:border-cyan-700'}`}\r\n                            >\r\n                                {editingSessionId === session.id ? (\r\n                                    <div className=\"flex items-center gap-2\" onClick={e => e.stopPropagation()}>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={editTitle}\r\n                                            onChange={(e) => setEditTitle(e.target.value)}\r\n                                            onKeyDown={(e) => {\r\n                                                if (e.key === 'Enter') saveRename(session.id);\r\n                                                if (e.key === 'Escape') cancelEditing();\r\n                                            }}\r\n                                            className=\"bg-black border border-cyan-500 text-cyan-400 text-sm rounded px-2 py-1 w-full focus:outline-none\"\r\n                                            autoFocus\r\n                                        />\r\n                                        <button onClick={(e) => saveRename(session.id, e)} className=\"text-green-500 hover:text-green-400\"><Check size={14} /></button>\r\n                                        <button onClick={(e) => cancelEditing(e)} className=\"text-red-500 hover:text-red-400\"><X size={14} /></button>\r\n                                    </div>\r\n                                ) : (\r\n                                    <>\r\n                                        <div className=\"font-bold text-sm truncate\">{session.title}</div>\r\n                                        <div className=\"text-xs text-gray-600 mt-1 flex justify-between items-center\">\r\n                                            <span>{new Date(session.lastModified).toLocaleDateString()}</span>\r\n                                            <div className=\"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                                <button\r\n                                                    onClick={(e) => startEditing(session, e)}\r\n                                                    className=\"text-cyan-600 hover:text-cyan-400\"\r\n                                                    title=\"Renommer\"\r\n                                                >\r\n                                                    <Edit2 size={12} />\r\n                                                </button>\r\n                                                <button\r\n                                                    onClick={(e) => deleteSession(session.id, e)}\r\n                                                    className=\"text-red-500 hover:text-red-400\"\r\n                                                    title=\"Supprimer\"\r\n                                                >\r\n                                                    <LogOut size={12} />\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Footer Controls */}\r\n                <div className=\"p-4 border-t border-cyan-900 bg-black/50\">\r\n                    {/* GoogleAuthPanel removed as per user request */}\r\n                    <div className=\"mt-4 flex items-center justify-between text-xs text-gray-500\">\r\n                        <span>v1.2.0</span>\r\n                        <div className=\"flex gap-2\">\r\n                            <button\r\n                                onClick={() => setCurrentView('settings')}\r\n                                className={`hover:text-cyan-400 ${currentView === 'settings' ? 'text-cyan-400' : ''}`}\r\n                            >\r\n                                <Settings size={14} />\r\n                            </button>\r\n                            <button className=\"hover:text-red-400\"><LogOut size={14} /></button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* MAIN CONTENT AREA */}\r\n            <div className=\"flex-1 flex flex-col relative bg-[url('/grid.png')]\">\r\n                {/* Header Toolbar */}\r\n                <div className=\"h-16 border-b border-cyan-900 bg-black/80 backdrop-blur flex items-center justify-between px-6 z-40\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <ModelSelector\r\n                            currentProvider={selectedProvider}\r\n                            currentModel={selectedModel}\r\n                            onSelectModel={(model, provider) => {\r\n                                setSelectedModel(model);\r\n                                setSelectedProvider(provider);\r\n                            }}\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <select\r\n                            value={selectedPattern}\r\n                            onChange={(e) => setSelectedPattern(e.target.value)}\r\n                            className=\"bg-black border border-cyan-700 text-cyan-400 rounded px-3 py-1 text-sm focus:outline-none focus:border-cyan-400\"\r\n                        >\r\n                            <option value=\"\">Mode: Standard</option>\r\n                            {patterns.map(p => (\r\n                                <option key={p} value={p}>{p}</option>\r\n                            ))}\r\n                        </select>\r\n                        {selectedPattern && (\r\n                            <button\r\n                                onClick={() => openPatternModal(selectedPattern)}\r\n                                className=\"text-cyan-600 hover:text-cyan-400\"\r\n                                title=\"Voir le pattern\"\r\n                            >\r\n                                üëÅÔ∏è\r\n                            </button>\r\n                        )}\r\n                        <button\r\n                            onClick={() => setIsMuted(!isMuted)}\r\n                            className={`p-2 rounded-full border ${isMuted ? 'border-red-500 text-red-500' : 'border-cyan-500 text-cyan-500'} hover:bg-gray-800 transition-all`}\r\n                        >\r\n                            {isMuted ? 'üîá' : 'üîä'}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* CONDITIONAL RENDER: CHAT or DASHBOARD or SPACE */}\r\n                {currentView === 'dashboard' ? (\r\n                    <Dashboard />\r\n                ) : currentView === 'space' ? (\r\n                    <SpaceDashboard />\r\n                ) : currentView === 'project' ? (\r\n                    <ProjectDashboard />\r\n                ) : currentView === 'settings' ? (\r\n                    <SettingsPage />\r\n                ) : (\r\n                    <>\r\n                        {/* Chat History */}\r\n                        <div className=\"flex-1 overflow-y-auto p-6 space-y-6 scrollbar-thin scrollbar-thumb-cyan-900 scrollbar-track-black\">\r\n                            {messages.map((msg) => (\r\n                                <div key={msg.id} className={`flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`}>\r\n                                    <div className={`max-w-[80%] p-4 rounded-lg border backdrop-blur-sm ${msg.sender === 'user'\r\n                                        ? 'bg-cyan-900/20 border-cyan-500/50 text-cyan-100 rounded-br-none'\r\n                                        : 'bg-black/60 border-gray-700 text-gray-300 rounded-bl-none shadow-[0_0_15px_rgba(0,255,255,0.1)]'\r\n                                        }`}>\r\n                                        <div className=\"flex items-center gap-2 mb-2 border-b border-white/10 pb-1 justify-between\">\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <span className={`text-xs font-bold uppercase tracking-wider ${msg.sender === 'user' ? 'text-cyan-400' : 'text-purple-400'}`}>\r\n                                                    {msg.sender === 'user' ? 'OPERATOR' : APP_CONFIG.name}\r\n                                                </span>\r\n                                                <span className=\"text-[10px] text-gray-500\">{new Date().toLocaleTimeString()}</span>\r\n                                            </div>\r\n                                            <button\r\n                                                onClick={(e) => handleDeleteMessage(msg.id, e)}\r\n                                                className=\"text-gray-600 hover:text-red-500 transition-colors\"\r\n                                                title=\"Supprimer le message\"\r\n                                            >\r\n                                                <LogOut size={12} className=\"rotate-180\" /> {/* Using LogOut as trash icon for now */}\r\n                                            </button>\r\n                                        </div>\r\n                                        <div className=\"whitespace-pre-wrap leading-relaxed text-sm\">\r\n                                            {msg.text}\r\n                                        </div>\r\n                                        {msg.sender === 'agent' && (\r\n                                            <div className=\"mt-2 flex justify-end\">\r\n                                                <button\r\n                                                    onClick={() => handleFeedbackOpen(msg.id)}\r\n                                                    className=\"text-gray-600 hover:text-red-400 text-xs flex items-center gap-1 transition-colors\"\r\n                                                    title=\"Signaler une erreur\"\r\n                                                >\r\n                                                    üëé Corriger\r\n                                                </button>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                            <div ref={messagesEndRef} />\r\n                        </div>\r\n\r\n                        {/* Input Area */}\r\n                        <div className=\"p-6 bg-black/80 border-t border-cyan-900 backdrop-blur\">\r\n                            <div className=\"relative max-w-4xl mx-auto\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={input}\r\n                                    onChange={(e) => setInput(e.target.value)}\r\n                                    onKeyDown={handleKeyDown}\r\n                                    placeholder=\"Entrez votre commande...\"\r\n                                    className=\"w-full bg-gray-900/50 border border-cyan-700 rounded-lg py-4 pl-4 pr-12 text-cyan-100 placeholder-cyan-800 focus:outline-none focus:border-cyan-400 focus:shadow-[0_0_20px_rgba(8,145,178,0.3)] transition-all\"\r\n                                />\r\n                                <button\r\n                                    onClick={toggleListening}\r\n                                    className={`absolute right-3 top-1/2 -translate-y-1/2 p-2 rounded-full transition-all ${isListening ? 'bg-red-500/20 text-red-500 animate-pulse' : 'text-cyan-600 hover:text-cyan-400'}`}\r\n                                >\r\n                                    {isListening ? 'üõë' : 'üé§'}\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"text-center mt-2 text-[10px] text-gray-600 uppercase tracking-widest\">\r\n                                Syst√®me S√©curis√© ‚Ä¢ Chiffrage End-to-End ‚Ä¢ {APP_CONFIG.version}\r\n                            </div>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n\r\n            {/* Modals */}\r\n            <FeedbackModal\r\n                isOpen={feedbackModalOpen}\r\n                onClose={() => setFeedbackModalOpen(false)}\r\n                onSubmit={submitFeedback}\r\n                correctionText={correctionText}\r\n                setCorrectionText={setCorrectionText}\r\n            />\r\n\r\n            <PatternModal\r\n                isOpen={patternModalOpen}\r\n                onClose={() => setPatternModalOpen(false)}\r\n                content={viewingPatternContent}\r\n            />\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default ChatInterface;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\src\\Dashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\src\\ProjectDashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":16,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":23},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  21 |\n  22 |     useEffect(() => {\n> 23 |         fetchCalendar();\n     |         ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  24 |     }, [fetchCalendar]);\n  25 |\n  26 |     return (","line":23,"column":9,"nodeType":null,"endLine":23,"endColumn":22}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { ExternalLink, Calendar, Briefcase, RefreshCw } from 'lucide-react';\r\n\r\nconst ProjectDashboard = () => {\r\n    const dartUrl = \"https://app.itsdart.com/\";\r\n\r\n    const [events, setEvents] = useState(\"Chargement...\");\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const fetchCalendar = React.useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n            const res = await fetch('http://localhost:3000/google/calendar');\r\n            const data = await res.json();\r\n            setEvents(data.events || \"Aucun √©v√©nement trouv√©.\");\r\n        } catch (error) {\r\n            setEvents(\"Erreur de chargement du calendrier.\");\r\n        }\r\n        setLoading(false);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        fetchCalendar();\r\n    }, [fetchCalendar]);\r\n\r\n    return (\r\n        <div className=\"flex-1 p-8 bg-black text-cyan-300 overflow-y-auto bg-[url('/grid.png')]\">\r\n            <h2 className=\"text-2xl font-bold tracking-widest mb-8 border-b border-cyan-900 pb-4 flex items-center gap-3\">\r\n                <Briefcase className=\"text-cyan-500\" /> MISSION CONTROL\r\n            </h2>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n\r\n                {/* DART AI CARD */}\r\n                <div className=\"bg-gray-900/50 border border-cyan-800 p-6 rounded-lg backdrop-blur hover:border-cyan-500 transition-all group\">\r\n                    <div className=\"flex justify-between items-start mb-4\">\r\n                        <h3 className=\"text-xl font-bold text-white group-hover:text-cyan-400 transition-colors\">DART AI</h3>\r\n                        <span className=\"bg-cyan-900/50 text-cyan-300 text-xs px-2 py-1 rounded border border-cyan-700\">PROJECTS</span>\r\n                    </div>\r\n                    <p className=\"text-gray-400 text-sm mb-6 h-12\">\r\n                        Gestion de projet, t√¢ches et sprints. Acc√®s direct √† l'espace de travail.\r\n                    </p>\r\n                    <div className=\"flex flex-col gap-2\">\r\n                        <div className=\"text-xs text-gray-500 font-mono mb-2\">WORKSPACE: kok90kMp4rU4</div>\r\n                        <a\r\n                            href={dartUrl}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            className=\"flex items-center justify-center gap-2 bg-cyan-700 hover:bg-cyan-600 text-white py-3 rounded font-bold transition-all shadow-[0_0_15px_rgba(8,145,178,0.3)] hover:shadow-[0_0_25px_rgba(34,211,238,0.5)]\"\r\n                        >\r\n                            <ExternalLink size={18} />\r\n                            OUVRIR DART\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* GOOGLE CALENDAR CARD (EMBEDDED) */}\r\n                <div className=\"bg-gray-900/50 border border-purple-800 p-6 rounded-lg backdrop-blur hover:border-purple-500 transition-all group flex flex-col h-[600px]\">\r\n                    <div className=\"flex justify-between items-start mb-4\">\r\n                        <h3 className=\"text-xl font-bold text-white group-hover:text-purple-400 transition-colors\">CALENDRIER</h3>\r\n                        <span className=\"bg-purple-900/50 text-purple-300 text-xs px-2 py-1 rounded border border-purple-700\">SCHEDULE</span>\r\n                    </div>\r\n\r\n                    {/* Live Events Widget (API) - Kept for quick summary */}\r\n                    <div className=\"bg-black/60 border border-gray-700 rounded p-2 mb-4 h-24 overflow-y-auto font-mono text-xs scrollbar-thin scrollbar-thumb-purple-900\">\r\n                        <div className=\"flex justify-between items-center mb-1 border-b border-gray-700 pb-1\">\r\n                            <span className=\"text-gray-500\">PROCHAINS (API)</span>\r\n                            <button onClick={fetchCalendar} disabled={loading} className=\"text-purple-400 hover:text-white\">\r\n                                <RefreshCw size={12} className={loading ? \"animate-spin\" : \"\"} />\r\n                            </button>\r\n                        </div>\r\n                        <pre className=\"whitespace-pre-wrap text-gray-300 leading-relaxed\">\r\n                            {events}\r\n                        </pre>\r\n                    </div>\r\n\r\n                    {/* Embed Iframe */}\r\n                    <div className=\"flex-1 bg-white rounded overflow-hidden\">\r\n                        <iframe\r\n                            src=\"https://calendar.google.com/calendar/embed?height=600&wkst=2&bgcolor=%23ffffff&ctz=America%2FToronto&showTitle=0&showNav=1&showDate=1&showPrint=0&showTabs=1&showCalendars=0&mode=WEEK\"\r\n                            style={{ borderWidth: 0 }}\r\n                            width=\"100%\"\r\n                            height=\"100%\"\r\n                            frameBorder=\"0\"\r\n                            scrolling=\"no\"\r\n                            title=\"Google Calendar\"\r\n                        ></iframe>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProjectDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\src\\SecurityScreen.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\src\\SettingsPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\src\\SpaceDashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\src\\components\\FeedbackModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\src\\components\\GoogleAuthPanel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\src\\components\\ModelSelector.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\src\\components\\PatternModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\src\\config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\th3th\\.Th3Thirty3\\thethirty3\\interface\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]